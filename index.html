<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>United state News Blog</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </head>
<body >
  <nav class="navbar bg-body-tertiary">
    <div class="container-fluid">
      <a class="navbar-brand">Hritik</a>
      <form class="d-flex" role="search">
        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" id="searchInput">
        <button class="btn btn-outline-success" type="submit" onclick="performSearch(event)">Search</button>
      </form>
    </div>
  </nav>
  <header>
    <h1>USA News Blog</h1>
    <p>Latest News from America</p>
  </header>

  <main>
    <div id="news-container">
      <!-- News articles will be inserted here dynamically -->
    </div>
  </main>

  <footer>
    <p>&copy; <span id="year"></span> Hritik News Blog</p>
  </footer>

  <script>
    // Function to fetch and display news articles
    async function fetchNews() {
      try {
        const response = await fetch('/api/news'); // Fetch news from the server API
        const articles = await response.json();

        const newsContainer = document.getElementById('news-container');
        newsContainer.innerHTML = ''; // Clear any existing content

        if (articles.length > 0) {
          articles.forEach(article => {
            const articleElement = document.createElement('div');
            articleElement.classList.add('article');

            const articleImage = article.urlToImage
              ? article.urlToImage
              : 'default.jpg';

            articleElement.innerHTML = `
              <img src="${articleImage}" alt="Article Image" class="img-fluid">
              <h2><a href="${article.url}" target="_blank">${article.title}</a></h2>
              <p>${article.description ? article.description : 'No description available'}</p>
              <span>${new Date(article.publishedAt).toLocaleString()}</span>
            `;

            newsContainer.appendChild(articleElement);
          });
        } else {
          newsContainer.innerHTML = '<p>No news articles available at the moment.</p>';
        }
      } catch (error) {
        console.error('Error fetching news:', error);
        document.getElementById('news-container').innerHTML = '<p>Error loading news.</p>';
      }
    }

    // Update the year dynamically in the footer
    document.getElementById('year').textContent = new Date().getFullYear();

    // Fetch news when the page loads
    window.onload = fetchNews;


window.onload = fetchNews;

  </script>
</body>
</html>
